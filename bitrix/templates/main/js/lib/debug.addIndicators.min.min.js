"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(["ScrollMagic"],t):t("object"==("undefined"==typeof exports?"undefined":_typeof(exports))?require("scrollmagic"):e.ScrollMagic||e.jQuery&&e.jQuery.ScrollMagic)}(void 0,function(e){var t="0.85em",r="9999",o=e._util,i=0;e.Scene.extend(function(){var e,t=this;t.addIndicators=function(r){if(!e){var s={name:"",indent:0,parent:void 0,colorStart:"green",colorEnd:"red",colorTrigger:"blue"};r=o.extend({},s,r),i++,e=new n(t,r),t.on("add.plugin_addIndicators",e.add),t.on("remove.plugin_addIndicators",e.remove),t.on("destroy.plugin_addIndicators",t.removeIndicators),t.controller()&&e.add()}return t},t.removeIndicators=function(){return e&&(e.remove(),this.off("*.plugin_addIndicators"),e=void 0),t}}),e.Controller.addOption("addIndicators",!1),e.Controller.extend(function(){var t=this,r=t.info(),i=r.container,n=r.isDocument,s=r.vertical,d={groups:[]};this._indicators=d;var a=function(){d.updateBoundsPositions()},g=function(){d.updateTriggerGroupPositions()};return i.addEventListener("resize",g),n||(window.addEventListener("resize",g),window.addEventListener("scroll",g)),i.addEventListener("resize",a),i.addEventListener("scroll",a),this._indicators.updateBoundsPositions=function(e){for(var t,r,n,a=e?[o.extend({},e.triggerGroup,{members:[e]})]:d.groups,g=a.length,p={},u=s?"left":"top",c=s?"width":"height",l=s?o.get.scrollLeft(i)+o.get.width(i)-15:o.get.scrollTop(i)+o.get.height(i)-15;g--;)for(t=(n=a[g]).members.length,r=o.get[c](n.element.firstChild);t--;)p[u]=l-r,o.css(n.members[t].bounds,p)},this._indicators.updateTriggerGroupPositions=function(e){for(var r,a,g,p,u=e?[e]:d.groups,c=u.length,l=n?document.body:i,f=n?{top:0,left:0}:o.get.offset(l,!0),m=s?o.get.width(i)-15:o.get.height(i)-15,h=s?"width":"height",v=s?"Y":"X";c--;)a=(r=u[c]).element,p=(g=r.triggerHook*t.info("size"))>o.get[h](a.firstChild.firstChild)?"translate"+v+"(-100%)":"",o.css(a,{top:f.top+(s?g:m-r.members[0].options.indent),left:f.left+(s?m-r.members[0].options.indent:g)}),o.css(a.firstChild.firstChild,{"-ms-transform":p,"-webkit-transform":p,transform:p})},this._indicators.updateTriggerGroupLabel=function(e){var t="trigger"+(e.members.length>1?"":" "+e.members[0].options.name),r=e.element.firstChild.firstChild;r.textContent!==t&&(r.textContent=t,s&&d.updateBoundsPositions())},this.addScene=function(r){this._options.addIndicators&&r instanceof e.Scene&&r.controller()===t&&r.addIndicators(),this.$super.addScene.apply(this,arguments)},this.destroy=function(){i.removeEventListener("resize",g),n||(window.removeEventListener("resize",g),window.removeEventListener("scroll",g)),i.removeEventListener("resize",a),i.removeEventListener("scroll",a),this.$super.destroy.apply(this,arguments)},t});var n=function(e,t){var r,n,d=this,a=s.bounds(),g=s.start(t.colorStart),p=s.end(t.colorEnd),u=t.parent&&o.get.elements(t.parent)[0];t.name=t.name||i,g.firstChild.textContent+=" "+t.name,p.textContent+=" "+t.name,a.appendChild(g),a.appendChild(p),d.options=t,d.bounds=a,d.triggerGroup=void 0,this.add=function(){n=e.controller(),r=n.info("vertical");var t=n.info("isDocument");u||(u=t?document.body:n.info("container")),t||"static"!==o.css(u,"position")||o.css(u,{position:"relative"}),e.on("change.plugin_addIndicators",l),e.on("shift.plugin_addIndicators",c),G(),h(),setTimeout(function(){n._indicators.updateBoundsPositions(d)},0)},this.remove=function(){if(d.triggerGroup){if(e.off("change.plugin_addIndicators",l),e.off("shift.plugin_addIndicators",c),d.triggerGroup.members.length>1){var t=d.triggerGroup;t.members.splice(t.members.indexOf(d),1),n._indicators.updateTriggerGroupLabel(t),n._indicators.updateTriggerGroupPositions(t),d.triggerGroup=void 0}else b();m()}};var c=function(){h()},l=function(e){"triggerHook"===e.what&&G()},f=function(){var e=n.info("vertical");o.css(g.firstChild,{"border-bottom-width":e?1:0,"border-right-width":e?0:1,bottom:e?-1:t.indent,right:e?t.indent:-1,padding:e?"0 8px":"2px 4px"}),o.css(p,{"border-top-width":e?1:0,"border-left-width":e?0:1,top:e?"100%":"",right:e?t.indent:"",bottom:e?"":t.indent,left:e?"":"100%",padding:e?"0 8px":"2px 4px"}),u.appendChild(a)},m=function(){a.parentNode.removeChild(a)},h=function(){a.parentNode!==u&&f();var t={};t[r?"top":"left"]=e.triggerPosition(),t[r?"height":"width"]=e.duration(),o.css(a,t),o.css(p,{display:e.duration()>0?"":"none"})},v=function(){var i=s.trigger(t.colorTrigger),a={};a[r?"right":"bottom"]=0,a[r?"border-top-width":"border-left-width"]=1,o.css(i.firstChild,a),o.css(i.firstChild.firstChild,{padding:r?"0 8px 3px 8px":"3px 4px"}),document.body.appendChild(i);var g={triggerHook:e.triggerHook(),element:i,members:[d]};n._indicators.groups.push(g),d.triggerGroup=g,n._indicators.updateTriggerGroupLabel(g),n._indicators.updateTriggerGroupPositions(g)},b=function(){n._indicators.groups.splice(n._indicators.groups.indexOf(d.triggerGroup),1),d.triggerGroup.element.parentNode.removeChild(d.triggerGroup.element),d.triggerGroup=void 0},G=function(){var t=e.triggerHook();if(!(d.triggerGroup&&Math.abs(d.triggerGroup.triggerHook-t)<1e-4)){for(var r,o=n._indicators.groups,i=o.length;i--;)if(r=o[i],Math.abs(r.triggerHook-t)<1e-4)return d.triggerGroup&&(1===d.triggerGroup.members.length?b():(d.triggerGroup.members.splice(d.triggerGroup.members.indexOf(d),1),n._indicators.updateTriggerGroupLabel(d.triggerGroup),n._indicators.updateTriggerGroupPositions(d.triggerGroup))),r.members.push(d),d.triggerGroup=r,void n._indicators.updateTriggerGroupLabel(r);if(d.triggerGroup){if(1===d.triggerGroup.members.length)return d.triggerGroup.triggerHook=t,void n._indicators.updateTriggerGroupPositions(d.triggerGroup);d.triggerGroup.members.splice(d.triggerGroup.members.indexOf(d),1),n._indicators.updateTriggerGroupLabel(d.triggerGroup),n._indicators.updateTriggerGroupPositions(d.triggerGroup),d.triggerGroup=void 0}v()}}},s={start:function(e){var t=document.createElement("div");t.textContent="start",o.css(t,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e});var r=document.createElement("div");return o.css(r,{position:"absolute",overflow:"visible",width:0,height:0}),r.appendChild(t),r},end:function(e){var t=document.createElement("div");return t.textContent="end",o.css(t,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e}),t},bounds:function(){var e=document.createElement("div");return o.css(e,{position:"absolute",overflow:"visible","white-space":"nowrap","pointer-events":"none","font-size":t}),e.style.zIndex=r,e},trigger:function(e){var i=document.createElement("div");i.textContent="trigger",o.css(i,{position:"relative"});var n=document.createElement("div");o.css(n,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e}),n.appendChild(i);var s=document.createElement("div");return o.css(s,{position:"fixed",overflow:"visible","white-space":"nowrap","pointer-events":"none","font-size":t}),s.style.zIndex=r,s.appendChild(n),s}}});